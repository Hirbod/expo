{"version":3,"file":"SQLiteStatement.js","sourceRoot":"","sources":["../../src/next/SQLiteStatement.ts"],"names":[],"mappings":"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","sourcesContent":["import { NativeDatabase } from './NativeDatabase';\nimport {\n  SQLiteBindParams,\n  SQLiteBindValue,\n  NativeStatement,\n  SQLiteRunResult,\n  SQLiteVariadicBindParams,\n  type SQLiteColumnNames,\n  type SQLiteColumnValues,\n} from './NativeStatement';\n\nexport { SQLiteBindParams, SQLiteBindValue, SQLiteRunResult, SQLiteVariadicBindParams };\n\n/**\n * A prepared statement returned by [`Database.prepareAsync()`](#prepareasyncsource) or [`Database.prepareSync()`](#preparesyncsource) that can be binded with parameters and executed.\n */\nexport class SQLiteStatement {\n  constructor(\n    private readonly nativeDatabase: NativeDatabase,\n    private readonly nativeStatement: NativeStatement\n  ) {}\n\n  //#region Asynchronous API\n\n  /**\n   * Run the prepared statement and return the result.\n   * @param params The parameters to bind to the prepared statement. You can pass values in array, object, or variadic arguments. See [`SQLiteBindValue`](#sqlitebindvalue) for more information about binding values.\n   */\n  public runAsync(params: SQLiteBindParams): Promise<SQLiteRunResult>;\n  /**\n   * @hidden\n   */\n  public runAsync(...params: SQLiteVariadicBindParams): Promise<SQLiteRunResult>;\n  public async runAsync(...params: unknown[]): Promise<SQLiteRunResult> {\n    const { params: bindParams, shouldPassAsObject } = normalizeParams(...params);\n    if (shouldPassAsObject) {\n      return await this.nativeStatement.objectRunAsync(this.nativeDatabase, bindParams);\n    } else {\n      return await this.nativeStatement.arrayRunAsync(this.nativeDatabase, bindParams);\n    }\n  }\n\n  /**\n   * Iterate the prepared statement and return results as an async iterable.\n   * @param params The parameters to bind to the prepared statement. You can pass values in array, object, or variadic arguments. See [`SQLiteBindValue`](#sqlitebindvalue) for more information about binding values.\n   * @example\n   * ```ts\n   * const statement = await db.prepareAsync('SELECT * FROM test');\n   * for await (const row of statement.eachAsync<any>()) {\n   *   console.log(row);\n   * }\n   * await statement.finalizeAsync();\n   * ```\n   */\n  public eachAsync<T>(params: SQLiteBindParams): AsyncGenerator<T>;\n  /**\n   * @hidden\n   */\n  public eachAsync<T>(...params: SQLiteVariadicBindParams): AsyncGenerator<T>;\n  public async *eachAsync<T>(...params: unknown[]): AsyncGenerator<T> {\n    const { params: bindParams, shouldPassAsObject } = normalizeParams(...params);\n    const func = shouldPassAsObject\n      ? this.nativeStatement.objectGetAsync.bind(this.nativeStatement)\n      : this.nativeStatement.arrayGetAsync.bind(this.nativeStatement);\n\n    const columnNames = await this.getColumnNamesAsync();\n    let result = null;\n    do {\n      result = await func(this.nativeDatabase, bindParams);\n      if (result != null) {\n        yield composeRow<T>(columnNames, result);\n      }\n    } while (result != null);\n  }\n\n  /**\n   * Get one row from the prepared statement.\n   * @param params The parameters to bind to the prepared statement. You can pass values in array, object, or variadic arguments. See [`SQLiteBindValue`](#sqlitebindvalue) for more information about binding values.\n   */\n  public getAsync<T>(params: SQLiteBindParams): Promise<T | null>;\n  /**\n   * @hidden\n   */\n  public getAsync<T>(...params: SQLiteVariadicBindParams): Promise<T | null>;\n  public async getAsync<T>(...params: unknown[]): Promise<T | null> {\n    const { params: bindParams, shouldPassAsObject } = normalizeParams(...params);\n    const columnNames = await this.getColumnNamesAsync();\n    const columnValues = shouldPassAsObject\n      ? await this.nativeStatement.objectGetAsync(this.nativeDatabase, bindParams)\n      : await this.nativeStatement.arrayGetAsync(this.nativeDatabase, bindParams);\n    return columnValues != null ? composeRow<T>(columnNames, columnValues) : null;\n  }\n\n  /**\n   * Get all rows from the prepared statement.\n   * @param params The parameters to bind to the prepared statement. You can pass values in array, object, or variadic arguments. See [`SQLiteBindValue`](#sqlitebindvalue) for more information about binding values.\n   */\n  public allAsync<T>(params: SQLiteBindParams): Promise<T[]>;\n  /**\n   * @hidden\n   */\n  public allAsync<T>(...params: SQLiteVariadicBindParams): Promise<T[]>;\n  public async allAsync<T>(...params: unknown[]): Promise<T[]> {\n    const { params: bindParams, shouldPassAsObject } = normalizeParams(...params);\n    const columnNames = await this.getColumnNamesAsync();\n    const columnValuesList = shouldPassAsObject\n      ? await this.nativeStatement.objectGetAllAsync(this.nativeDatabase, bindParams)\n      : await this.nativeStatement.arrayGetAllAsync(this.nativeDatabase, bindParams);\n    return composeRows<T>(columnNames, columnValuesList);\n  }\n\n  /**\n   * Get the column names of the prepared statement.\n   */\n  public getColumnNamesAsync(): Promise<string[]> {\n    return this.nativeStatement.getColumnNamesAsync();\n  }\n\n  /**\n   * Reset the prepared statement cursor. This will call the [`sqlite3_reset()`](https://www.sqlite.org/c3ref/reset.html) C function under the hood.\n   */\n  public async resetAsync(): Promise<void> {\n    await this.nativeStatement.resetAsync(this.nativeDatabase);\n  }\n\n  /**\n   * Finalize the prepared statement.\n   * > **Note:** Remember to finalize the prepared statement whenever you call `prepareAsync()` to avoid resource leaks.\n   */\n  public async finalizeAsync(): Promise<void> {\n    await this.nativeStatement.finalizeAsync(this.nativeDatabase);\n  }\n\n  //#endregion\n\n  //#region Synchronous API\n\n  /**\n   * Run the prepared statement and return the result.\n   * > **Note:** Running heavy tasks with this function can block the JavaScript thread and affect performance.\n   * @param params The parameters to bind to the prepared statement. You can pass values in array, object, or variadic arguments. See [`SQLiteBindValue`](#sqlitebindvalue) for more information about binding values.\n   */\n  public runSync(params: SQLiteBindParams): SQLiteRunResult;\n  /**\n   * @hidden\n   */\n  public runSync(...params: SQLiteVariadicBindParams): SQLiteRunResult;\n  public runSync(...params: unknown[]): SQLiteRunResult {\n    const { params: bindParams, shouldPassAsObject } = normalizeParams(...params);\n    if (shouldPassAsObject) {\n      return this.nativeStatement.objectRunSync(this.nativeDatabase, bindParams);\n    } else {\n      return this.nativeStatement.arrayRunSync(this.nativeDatabase, bindParams);\n    }\n  }\n\n  /**\n   * Iterate the prepared statement and return results as an iterable.\n   * > **Note:** Running heavy tasks with this function can block the JavaScript thread and affect performance.\n   * @param params The parameters to bind to the prepared statement. You can pass values in array, object, or variadic arguments. See [`SQLiteBindValue`](#sqlitebindvalue) for more information about binding values.\n   */\n  public eachSync<T>(params: SQLiteBindParams): Generator<T>;\n  /**\n   * @hidden\n   */\n  public eachSync<T>(...params: SQLiteVariadicBindParams): Generator<T>;\n  public *eachSync<T>(...params: unknown[]): Generator<T> {\n    const { params: bindParams, shouldPassAsObject } = normalizeParams(...params);\n    const func = shouldPassAsObject\n      ? this.nativeStatement.objectGetSync.bind(this.nativeStatement)\n      : this.nativeStatement.arrayGetSync.bind(this.nativeStatement);\n\n    const columnNames = this.getColumnNamesSync();\n    let result = null;\n    do {\n      result = func(this.nativeDatabase, bindParams);\n      if (result != null) {\n        yield composeRow<T>(columnNames, result);\n      }\n    } while (result != null);\n  }\n\n  /**\n   * Get one row from the prepared statement.\n   * > **Note:** Running heavy tasks with this function can block the JavaScript thread and affect performance.\n   * @param params The parameters to bind to the prepared statement. You can pass values in array, object, or variadic arguments. See [`SQLiteBindValue`](#sqlitebindvalue) for more information about binding values.\n   */\n  public getSync<T>(params: SQLiteBindParams): T | null;\n  /**\n   * @hidden\n   */\n  public getSync<T>(...params: SQLiteVariadicBindParams): T | null;\n  public getSync<T>(...params: unknown[]): T | null {\n    const { params: bindParams, shouldPassAsObject } = normalizeParams(...params);\n    const columnNames = this.getColumnNamesSync();\n    const columnValues = shouldPassAsObject\n      ? this.nativeStatement.objectGetSync(this.nativeDatabase, bindParams)\n      : this.nativeStatement.arrayGetSync(this.nativeDatabase, bindParams);\n    return columnValues != null ? composeRow<T>(columnNames, columnValues) : null;\n  }\n\n  /**\n   * Get all rows from the prepared statement.\n   * > **Note:** Running heavy tasks with this function can block the JavaScript thread and affect performance.\n   * @param params The parameters to bind to the prepared statement. You can pass values in array, object, or variadic arguments. See [`SQLiteBindValue`](#sqlitebindvalue) for more information about binding values.\n   */\n  public allSync<T>(params: SQLiteBindParams): T[];\n  /**\n   * @hidden\n   */\n  public allSync<T>(...params: SQLiteVariadicBindParams): T[];\n  public allSync<T>(...params: unknown[]): T[] {\n    const { params: bindParams, shouldPassAsObject } = normalizeParams(...params);\n    const columnNames = this.getColumnNamesSync();\n    const columnValuesList = shouldPassAsObject\n      ? this.nativeStatement.objectGetAllSync(this.nativeDatabase, bindParams)\n      : this.nativeStatement.arrayGetAllSync(this.nativeDatabase, bindParams);\n    return composeRows<T>(columnNames, columnValuesList);\n  }\n\n  /**\n   * Get the column names of the prepared statement.\n   */\n  public getColumnNamesSync(): string[] {\n    return this.nativeStatement.getColumnNamesSync();\n  }\n\n  /**\n   * Reset the prepared statement cursor. This will call the [`sqlite3_reset()`](https://www.sqlite.org/c3ref/reset.html) C function under the hood.\n   */\n  public resetSync(): void {\n    this.nativeStatement.resetSync(this.nativeDatabase);\n  }\n\n  /**\n   * Finalize the prepared statement.\n   *\n   * > **Note:** Remember to finalize the prepared statement whenever you call `prepareSync()` to avoid resource leaks.\n   *\n   */\n  public finalizeSync(): void {\n    this.nativeStatement.finalizeSync(this.nativeDatabase);\n  }\n\n  //#endregion\n}\n\n/**\n * Normalize the bind params to an array or object.\n * @hidden\n */\nexport function normalizeParams(...params: any[]): {\n  params: SQLiteBindParams;\n  shouldPassAsObject: boolean;\n} {\n  let bindParams = params.length > 1 ? params : (params[0] as SQLiteBindParams);\n  if (bindParams == null) {\n    bindParams = [];\n  }\n  if (typeof bindParams !== 'object') {\n    bindParams = [bindParams];\n  }\n  const shouldPassAsObject = !Array.isArray(bindParams);\n  return {\n    params: bindParams,\n    shouldPassAsObject,\n  };\n}\n\n/**\n * Compose `columnNames` and `columnValues` to an row object.\n * @hidden\n */\nexport function composeRow<T>(columnNames: SQLiteColumnNames, columnValues: SQLiteColumnValues): T {\n  const row = {};\n  if (columnNames.length !== columnValues.length) {\n    throw new Error(\n      `Column names and values count mismatch. Names: ${columnNames.length}, Values: ${columnValues.length}`\n    );\n  }\n  for (let i = 0; i < columnNames.length; i++) {\n    row[columnNames[i]] = columnValues[i];\n  }\n  return row as T;\n}\n\n/**\n * Compose `columnNames` and `columnValuesList` to an array of row objects.\n * @hidden\n */\nexport function composeRows<T>(\n  columnNames: SQLiteColumnNames,\n  columnValuesList: SQLiteColumnValues[]\n): T[] {\n  if (columnValuesList.length === 0) {\n    return [];\n  }\n  if (columnNames.length !== columnValuesList[0].length) {\n    // We only check the first row because SQLite returns the same column count for all rows.\n    throw new Error(\n      `Column names and values count mismatch. Names: ${columnNames.length}, Values: ${columnValuesList[0].length}`\n    );\n  }\n  const results: T[] = [];\n  for (const columnValues of columnValuesList) {\n    const row = {};\n    for (let i = 0; i < columnNames.length; i++) {\n      row[columnNames[i]] = columnValues[i];\n    }\n    results.push(row as T);\n  }\n  return results;\n}\n"]}